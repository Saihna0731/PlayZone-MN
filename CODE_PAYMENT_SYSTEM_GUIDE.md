# PlayZone MN - Payment Code System Guide

## ğŸ¯ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ¸Ğ¹Ğ½ Ğ¢Ğ¾Ğ¹Ğ¼

PlayZone MN Ğ½ÑŒ **ÑƒĞ½Ğ¸ĞºĞ°Ğ» Ñ‚Ó©Ğ»Ğ±Ó©Ñ€Ğ¸Ğ¹Ğ½ ĞºĞ¾Ğ´ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‚ÑĞ¹** Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ Ñ‚Ó©Ğ»Ğ±Ó©Ñ€Ğ¸Ğ¹Ğ½ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶ÑƒÑƒĞ»Ğ°Ğ»Ñ‚ Ğ°ÑˆĞ¸Ğ³Ğ»Ğ°Ğ´Ğ°Ğ³. Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡ Ñ‚Ó©Ğ»Ğ±Ó©Ñ€ Ñ‚Ó©Ğ»Ó©Ñ…Ğ´Ó©Ó© **Ğ³Ò¯Ğ¹Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ ÑƒÑ‚Ğ³Ğ° Ğ´ÑÑÑ€ ÑƒĞ½Ğ¸ĞºĞ°Ğ» ĞºĞ¾Ğ´** Ğ¾Ñ€ÑƒÑƒĞ»Ğ¶, SMS Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ°Ğ°Ñ€ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶Ğ¸Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼ ÑĞ¼.

---

## ğŸ”„ Ğ¢Ó©Ğ»Ğ±Ó©Ñ€Ğ¸Ğ¹Ğ½ Ğ£Ñ€ÑĞ³Ğ°Ğ»

### 1ï¸âƒ£ Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡Ğ¸Ğ¹Ğ½ Ò®Ğ¹Ğ»Ğ´ÑĞ»

```
User â†’ Profile â†’ Plan ÑĞ¾Ğ½Ğ³Ğ¾Ñ… (Normal/Business Standard/Business Pro)
â†’ "Ğ¨ÑƒÑƒĞ´ ÑÑ…Ğ»ÑÑ…" Ñ‚Ğ¾Ğ²Ñ‡ Ğ´Ğ°Ñ€Ğ°Ñ…
â†’ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼ unique CODE Ò¯Ò¯ÑĞ³ÑĞ½Ñ (Ğ¶Ğ¸ÑˆÑÑ: PZ-A1B2C3)
â†’ Payment Modal Ğ³Ğ°Ñ€Ñ‡ Ğ¸Ñ€Ğ½Ñ:
   - Ğ‘Ğ°Ğ½ĞºĞ½Ñ‹ Ğ¼ÑĞ´ÑÑĞ»ÑĞ»
   - Ğ”Ğ°Ğ½ÑĞ½Ñ‹ Ğ´ÑƒĞ³Ğ°Ğ°Ñ€: 5401345831
   - Ğ”Ğ°Ğ½ÑĞ½Ñ‹ Ğ½ÑÑ€: Ğ‘.Ğ‘Ğ°ÑÑ€ÑĞ°Ğ¹Ñ…Ğ°Ğ½
   - Ğ£Ñ‚Ğ°Ñ: 60643016
   - ğŸ”‘ PAYMENT CODE: PZ-A1B2C3 (24 Ñ†Ğ°Ğ³Ğ¸Ğ¹Ğ½ Ñ…ÑƒĞ³Ğ°Ñ†Ğ°Ğ°Ñ‚Ğ°Ğ¹)
```

### 2ï¸âƒ£ Ğ¨Ğ¸Ğ»Ğ¶Ò¯Ò¯Ğ»ÑĞ³ Ğ¥Ğ¸Ğ¹Ñ…

```
User â†’ Mobile Banking App Ğ½ÑÑÑ…
â†’ Ğ¥Ğ°Ğ°Ğ½ Ğ±Ğ°Ğ½Ğº Ñ€ÑƒÑƒ ÑˆĞ¸Ğ»Ğ¶Ò¯Ò¯Ğ»ÑĞ³ Ñ…Ğ¸Ğ¹Ñ…
â†’ Ğ”Ğ°Ğ½ÑĞ½Ñ‹ Ğ´ÑƒĞ³Ğ°Ğ°Ñ€: 5401345831
â†’ Ğ”Ò¯Ğ½: 19,900â‚® (ÑĞ¾Ğ½Ğ³Ğ¾ÑĞ¾Ğ½ Ğ¿Ğ»Ğ°Ğ½Ğ°Ğ°ÑĞ°Ğ° Ñ…Ğ°Ğ¼Ğ°Ğ°Ñ€ÑƒÑƒĞ»Ğ¶)
â†’ âš ï¸ Ğ“Ò®Ğ™Ğ›Ğ“Ğ­Ğ­ĞĞ˜Ğ™ Ğ£Ğ¢Ğ“Ğ: PZ-A1B2C3 (Ğ­Ğ½Ñ ĞºĞ¾Ğ´Ñ‹Ğ³ Ğ·Ğ°Ğ°Ğ²Ğ°Ğ» Ğ±Ğ¸Ñ‡Ğ½Ñ!)
â†’ Ğ¨Ğ¸Ğ»Ğ¶Ò¯Ò¯Ğ»ÑĞ³ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶ÑƒÑƒĞ»Ğ°Ñ…
```

### 3ï¸âƒ£ SMS ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ Ğ‘Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶ÑƒÑƒĞ»Ğ°Ğ»Ñ‚

```
Ğ‘Ğ°Ğ½Ğº â†’ SMS Ğ¸Ğ»Ğ³ÑÑÑ…:
"KHANBANK: 19,900â‚® Ğ¾Ñ€Ğ»Ğ¾Ğ³Ğ¾. Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ ÑƒÑ‚Ğ³Ğ°: PZ-A1B2C3. Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑ: TXN123456. Ò®Ğ»Ğ´ÑĞ³Ğ´ÑĞ»: 150,000â‚®"

â†“

SMS Forwarder App (ÑƒÑ‚Ğ°Ñ Ğ´ÑÑÑ€) â†’ SMS ÑƒĞ½ÑˆĞ¸Ğ½Ğ°
â†’ Webhook Ñ€ÑƒÑƒ Ğ¸Ğ»Ğ³ÑÑÑ…: https://your-server.com/api/payment/webhook-sms

â†“

Backend Server â†’ SMS Ğ·Ğ°Ğ´Ğ°Ğ»Ğ¶ parse Ñ…Ğ¸Ğ¹Ñ…:
  - Ğ”Ò¯Ğ½: 19,900â‚® âœ…
  - CODE: PZ-A1B2C3 âœ…
  - Transaction ID: TXN123456 âœ…

â†’ PaymentCode collection-Ñ PZ-A1B2C3 ĞºĞ¾Ğ´ Ğ¾Ğ»Ğ¾Ñ…
â†’ ĞšĞ¾Ğ´ Ğ¸Ğ´ÑĞ²Ñ…Ñ‚ÑĞ¹ ÑÑÑÑ… ÑˆĞ°Ğ»Ğ³Ğ°Ñ… (status='pending', expiresAt > now)
â†’ Ò®Ğ½Ñ Ñ‚Ğ¾Ñ…Ğ¸Ñ€Ñ‡ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° ÑÑÑÑ… ÑˆĞ°Ğ»Ğ³Ğ°Ñ… (19,900â‚® === code.amount)
â†’ Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡Ğ¸Ğ¹Ğ³ ĞºĞ¾Ğ´Ğ¾Ğ¾Ñ€ Ğ¾Ğ»Ğ¾Ñ… (code.userId)
â†’ Subscription Ğ¸Ğ´ÑĞ²Ñ…Ğ¶Ò¯Ò¯Ğ»ÑÑ… (plan='business_standard', endDate=+1 month)
â†’ ĞšĞ¾Ğ´ 'used' Ğ±Ğ¾Ğ»Ğ³Ğ¾Ñ…
â†’ SmsLog Ñ…Ğ°Ğ´Ğ³Ğ°Ğ»Ğ°Ñ…

â†“

User â†’ Refresh Ñ…Ğ¸Ğ¹Ñ…ÑĞ´ ÑÑ€Ñ… Ğ¸Ğ´ÑĞ²Ñ…Ğ¶ÑÑĞ½ Ğ±Ğ°Ğ¹Ğ½Ğ°! âœ…
```

---

## ğŸ’» Backend Implementation

### PaymentCode Model

**Ğ¤Ğ°Ğ¹Ğ»:** `server/models/PaymentCode.js`

```javascript
{
  code: 'PZ-A1B2C3',           // Unique 8-char code
  userId: ObjectId,              // Ğ¥ÑĞ½ Ñ‚Ó©Ğ»Ğ±Ó©Ñ€ Ñ‚Ó©Ğ»Ğ¶ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ°
  planId: 'business_standard',   // Ğ¯Ğ¼Ğ°Ñ€ Ğ¿Ğ»Ğ°Ğ½ Ğ°Ğ²Ğ°Ñ…
  amount: 19900,                 // Ğ¢Ó©Ğ»Ó©Ñ… Ğ´Ò¯Ğ½
  status: 'pending',             // pending | used | expired
  expiresAt: Date,               // 24 Ñ†Ğ°Ğ³Ğ¸Ğ¹Ğ½ Ğ´Ğ°Ñ€Ğ°Ğ°
  usedAt: Date,                  // ĞÑˆĞ¸Ğ³Ğ»Ğ°ÑĞ°Ğ½ Ñ†Ğ°Ğ³
  createdAt: Date
}
```

**Indexes:**
- `code`: unique
- `{ userId, status, createdAt }`
- `{ status, expiresAt }`
- TTL index: 7 Ñ…Ğ¾Ğ½Ğ¾Ğ³Ğ¸Ğ¹Ğ½ Ğ´Ğ°Ñ€Ğ°Ğ° ÑƒÑÑ‚Ğ³Ğ°Ñ…

---

### API Endpoints

#### 1. POST /api/payment/generate-code

**Ğ¢Ğ°Ğ¹Ğ»Ğ±Ğ°Ñ€:** Ğ£Ğ½Ğ¸ĞºĞ°Ğ» Ñ‚Ó©Ğ»Ğ±Ó©Ñ€Ğ¸Ğ¹Ğ½ ĞºĞ¾Ğ´ Ò¯Ò¯ÑĞ³ÑÑ…

**Request:**
```json
{
  "planId": "business_standard"
}
```

**Response:**
```json
{
  "code": "PZ-A1B2C3",
  "amount": 19900,
  "planId": "business_standard",
  "expiresAt": "2025-11-27T10:00:00Z",
  "message": "ĞšĞ¾Ğ´ Ğ°Ğ¼Ğ¶Ğ¸Ğ»Ñ‚Ñ‚Ğ°Ğ¹ Ò¯Ò¯ÑĞ³ÑĞ³Ğ´Ğ»ÑÑ"
}
```

**Ğ›Ğ¾Ğ³Ğ¸Ğº:**
1. ĞŸĞ»Ğ°Ğ½ Ò¯Ğ½Ñ ÑˆĞ°Ğ»Ğ³Ğ°Ñ… (1990/19900/39900â‚®)
2. Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡Ğ¸Ğ¹Ğ½ Ğ¸Ğ´ÑĞ²Ñ…Ñ‚ÑĞ¹ ĞºĞ¾Ğ´ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° ÑÑÑÑ…Ğ¸Ğ¹Ğ³ ÑˆĞ°Ğ»Ğ³Ğ°Ñ…
3. Ğ¥ÑÑ€ÑĞ² Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° Ğ±Ğ¾Ğ» Ñ…ÑƒÑƒÑ‡Ğ¸Ğ½ ĞºĞ¾Ğ´Ñ‹Ğ³ Ğ±ÑƒÑ†Ğ°Ğ°Ñ…
4. Ğ‘Ğ°Ğ¹Ñ…Ğ³Ò¯Ğ¹ Ğ±Ğ¾Ğ» ÑˆĞ¸Ğ½Ñ 6 Ğ¾Ñ€Ğ¾Ğ½Ñ‚Ğ¾Ğ¹ ĞºĞ¾Ğ´ Ò¯Ò¯ÑĞ³ÑÑ… (PZ-XXXXXX)
5. Unique Ğ±Ğ°Ğ¹Ñ…Ñ‹Ğ³ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶ÑƒÑƒĞ»Ğ°Ñ…
6. Database-Ğ´ Ñ…Ğ°Ğ´Ğ³Ğ°Ğ»Ğ°Ñ…

---

#### 2. POST /api/payment/webhook-sms

**Ğ¢Ğ°Ğ¹Ğ»Ğ±Ğ°Ñ€:** SMS Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ°Ğ°Ñ€ Ğ±Ğ¾Ğ»Ğ¾Ğ²ÑÑ€ÑƒÑƒĞ»Ğ°Ñ…, ĞºĞ¾Ğ´Ğ¾Ğ¾Ñ€ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶ÑƒÑƒĞ»Ğ°Ñ…

**Headers:**
```
X-API-Key: your-secret-key-12345
Content-Type: application/json
```

**Request:**
```json
{
  "from": "1800",
  "message": "KHANBANK: 19,900â‚® Ğ¾Ñ€Ğ»Ğ¾Ğ³Ğ¾. Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ ÑƒÑ‚Ğ³Ğ°: PZ-A1B2C3. Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑ: TXN123. Ò®Ğ»Ğ´ÑĞ³Ğ´ÑĞ»: 150,000â‚®",
  "timestamp": "2025-11-26T14:30:00Z",
  "phone": "60643016"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Subscription activated successfully",
  "userId": "507f1f77bcf86cd799439011",
  "plan": "business_standard"
}
```

**Ğ›Ğ¾Ğ³Ğ¸Ğº:**
1. API Key Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶ÑƒÑƒĞ»Ğ°Ñ…
2. SMS Ğ·Ğ°Ğ´Ğ»Ğ°Ñ… (parse):
   - Ğ”Ò¯Ğ½: `/(\d{1,3}(?:,\d{3})*)\s*â‚®/`
   - Transaction ID: `/(?:Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑ|Transaction):\s*([A-Z0-9]+)/`
   - **ğŸ†• CODE:** `/(?:ÑƒÑ‚Ğ³Ğ°|description):\s*(PZ-[A-Z0-9]{6})/i`
3. Ğ”Ğ°Ğ²Ñ…Ğ°Ñ€ Ğ³Ò¯Ğ¹Ğ»Ğ³ÑÑ ÑˆĞ°Ğ»Ğ³Ğ°Ñ… (SmsLog-Ñ transactionId)
4. **Code ÑˆĞ°Ğ»Ğ³Ğ°Ñ…:**
   - PaymentCode collection-Ñ ĞºĞ¾Ğ´ Ğ¾Ğ»Ğ¾Ñ…
   - Status='pending', expiresAt > now
   - Ò®Ğ½Ñ Ñ‚Ğ¾Ñ…Ğ¸Ñ€Ñ‡ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° ÑÑÑÑ…
5. Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡Ğ¸Ğ¹Ğ³ ĞºĞ¾Ğ´Ğ¾Ğ¾Ñ€ Ğ¾Ğ»Ğ¾Ñ…
6. Subscription Ğ¸Ğ´ÑĞ²Ñ…Ğ¶Ò¯Ò¯Ğ»ÑÑ…
7. ĞšĞ¾Ğ´ 'used' Ğ±Ğ¾Ğ»Ğ³Ğ¾Ñ…
8. SmsLog Ñ…Ğ°Ğ´Ğ³Ğ°Ğ»Ğ°Ñ…

---

## ğŸ“± SMS Forwarder Setup (Android)

### App Ñ‚Ğ°Ñ‚Ğ°Ñ…

Google Play Store â†’ "SMS Forwarder" (pppscn/SmsForwarder)

### Rule Ò¯Ò¯ÑĞ³ÑÑ…

**Rule Name:** PlayZone Payment SMS

**Sender Filter:**
- Contains: `KHANBANK` ÑÑĞ²ÑĞ» `1800`

**Content Filter:**
- Contains: `PZ-`

**Forward Method:** HTTP/HTTPS Request

**Configuration:**
```
URL: https://your-server.com/api/payment/webhook-sms
Method: POST
Headers:
  Content-Type: application/json
  X-API-Key: your-secret-key-12345

Body Template:
{
  "from": "{{from}}",
  "message": "{{message}}",
  "timestamp": "{{timestamp}}",
  "phone": "60643016"
}
```

### Battery Optimization

Settings â†’ Apps â†’ SMS Forwarder â†’ Battery â†’ "Don't optimize"

---

## ğŸ§ª Testing

### 1. Local Testing (ngrok)

```bash
# Terminal 1: Server Ğ°Ğ¶Ğ¸Ğ»Ğ»ÑƒÑƒĞ»Ğ°Ñ…
cd server
npm start

# Terminal 2: ngrok
ngrok http 5000

# Ngrok URL-Ğ¸Ğ¹Ğ³ SMS Forwarder-Ğ´ Ğ¾Ñ€ÑƒÑƒĞ»Ğ°Ñ…
https://abc123.ngrok.io/api/payment/webhook-sms
```

### 2. Code Ò¯Ò¯ÑĞ³ÑÑ…

```bash
curl -X POST http://localhost:5000/api/payment/generate-code \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"planId":"business_standard"}'
```

**Response:**
```json
{
  "code": "PZ-A1B2C3",
  "amount": 19900,
  "expiresAt": "2025-11-27T10:00:00Z"
}
```

### 3. Test SMS Webhook

```bash
curl -X POST http://localhost:5000/api/payment/webhook-sms \
  -H "X-API-Key: your-secret-key" \
  -H "Content-Type: application/json" \
  -d '{
    "from":"1800",
    "message":"KHANBANK: 19,900â‚® Ğ¾Ñ€Ğ»Ğ¾Ğ³Ğ¾. Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ ÑƒÑ‚Ğ³Ğ°: PZ-A1B2C3. Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑ: TEST123. Ò®Ğ»Ğ´ÑĞ³Ğ´ÑĞ»: 150,000â‚®",
    "timestamp":"2025-11-26T14:30:00Z",
    "phone":"60643016"
  }'
```

**Expected:**
```json
{
  "success": true,
  "message": "Subscription activated",
  "userId": "...",
  "plan": "business_standard"
}
```

---

## ğŸ¨ Frontend UI

### Payment Modal Features

âœ… PlayZone MN Logo Ñ…Ğ°Ñ€Ğ°Ğ³Ğ´Ğ°Ğ½Ğ°  
âœ… ĞŸĞ»Ğ°Ğ½ Ğ½ÑÑ€ Ğ±Ğ¾Ğ»Ğ¾Ğ½ Ò¯Ğ½Ñ Ñ…Ğ°Ñ€Ğ°Ğ³Ğ´Ğ°Ğ½Ğ° (19,900â‚®)  
âœ… Ğ‘Ğ°Ğ½ĞºĞ½Ñ‹ Ğ¼ÑĞ´ÑÑĞ»ÑĞ»: Ğ¥Ğ°Ğ°Ğ½ Ğ±Ğ°Ğ½Ğº, 5401345831, Ğ‘.Ğ‘Ğ°ÑÑ€ÑĞ°Ğ¹Ñ…Ğ°Ğ½, 60643016  
âœ… **ğŸ†• PAYMENT CODE: PZ-A1B2C3** (Ñ‚Ğ¾Ğ¼, Ñ‚Ğ¾Ğ´, Ó©Ğ½Ğ³Ó©Ğ»Ó©Ğ³)  
âœ… Ğ‘Ò¯Ñ… Ğ¼ÑĞ´ÑÑĞ»Ğ»Ğ¸Ğ¹Ğ³ Ñ…ÑƒÑƒĞ»Ğ°Ñ… Ñ‚Ğ¾Ğ²Ñ‡ ("ğŸ“‹ Ğ¥ÑƒÑƒĞ»Ğ°Ñ…")  
âœ… Code-Ğ¸Ğ¹Ğ³ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ°Ğ°Ñ€ Ğ°Ğ²Ğ°Ñ… (loading state)  
âœ… Ğ”ÑĞ»Ğ³ÑÑ€ÑĞ½Ğ³Ò¯Ğ¹ Ğ·Ğ°Ğ°Ğ²Ğ°Ñ€ (code Ğ¾Ñ€ÑƒÑƒĞ»Ğ°Ñ… Ğ°Ğ½Ñ…Ğ°Ğ°Ñ€ÑƒÑƒĞ»Ğ³Ğ°Ñ‚Ğ°Ğ¹)  

### UI Example:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’³ Ğ¢Ó©Ğ»Ğ±Ó©Ñ€ Ñ‚Ó©Ğ»Ó©Ñ…                    â”‚
â”‚  Ğ‘Ğ¸Ğ·Ğ½ĞµÑ Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚ ĞŸĞ»Ğ°Ğ½                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ğ¨Ğ¸Ğ»Ğ¶Ò¯Ò¯Ğ»ÑÑ… Ğ´Ò¯Ğ½: 19,900â‚®             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¦ Ğ”Ğ°Ğ½ÑĞ½Ñ‹ Ğ¼ÑĞ´ÑÑĞ»ÑĞ»                 â”‚
â”‚  Ğ‘Ğ°Ğ½Ğº: Ğ¥Ğ°Ğ°Ğ½ Ğ±Ğ°Ğ½Ğº [ğŸ“‹ Ğ¥ÑƒÑƒĞ»Ğ°Ñ…]        â”‚
â”‚  Ğ”ÑƒĞ³Ğ°Ğ°Ñ€: 5401345831 [ğŸ“‹ Ğ¥ÑƒÑƒĞ»Ğ°Ñ…]     â”‚
â”‚  ĞÑÑ€: Ğ‘.Ğ‘Ğ°ÑÑ€ÑĞ°Ğ¹Ñ…Ğ°Ğ½ [ğŸ“‹ Ğ¥ÑƒÑƒĞ»Ğ°Ñ…]      â”‚
â”‚  Ğ£Ñ‚Ğ°Ñ: 60643016 [ğŸ“‹ Ğ¥ÑƒÑƒĞ»Ğ°Ñ…]         â”‚
â”‚                                      â”‚
â”‚  ğŸ”‘ Ğ“Ò¯Ğ¹Ğ»Ğ³ÑÑĞ½Ğ¸Ğ¹ ÑƒÑ‚Ğ³Ğ° (CODE)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    PZ-A1B2C3  [ğŸ“‹ Ğ¥ÑƒÑƒĞ»Ğ°Ñ…]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Œ Ğ—Ğ°Ğ°Ğ²Ğ°Ñ€:                          â”‚
â”‚  1. Ğ”Ğ°Ğ½ÑĞ°Ğ½Ğ´ ÑˆĞ¸Ğ»Ğ¶Ò¯Ò¯Ğ»ÑĞ³ Ñ…Ğ¸Ğ¹Ñ…          â”‚
â”‚  2. âš ï¸ Ğ“Ò®Ğ™Ğ›Ğ“Ğ­Ğ­ĞĞ˜Ğ™ Ğ£Ğ¢Ğ“Ğ Ğ´ÑÑÑ€          â”‚
â”‚     PZ-A1B2C3 ĞºĞ¾Ğ´Ñ‹Ğ³ Ğ±Ğ¸Ñ‡Ğ½Ñ Ò¯Ò¯!      â”‚
â”‚  3. SMS Ğ¸Ñ€Ğ½Ñ                        â”‚
â”‚  4. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶Ğ½Ğ° âœ…          â”‚
â”‚                                      â”‚
â”‚  ğŸ’¡ ĞšĞ¾Ğ´Ñ‹Ğ³ Ğ·Ğ°Ğ°Ğ²Ğ°Ğ» Ğ¾Ñ€ÑƒÑƒĞ»Ğ½Ğ° ÑƒÑƒ!        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         âœ… ĞĞ¹Ğ»Ğ³Ğ¾Ğ»Ğ¾Ğ¾                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Security

âœ… **API Key:** Webhook SMS_WEBHOOK_SECRET ÑˆĞ°Ğ»Ğ³Ğ°Ñ…  
âœ… **Rate Limiting:** 10 SMS/minute  
âœ… **Duplicate Prevention:** Transaction ID unique index  
âœ… **Code Expiry:** 24 Ñ†Ğ°Ğ³Ğ¸Ğ¹Ğ½ Ğ´Ğ°Ñ€Ğ°Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚ expire  
âœ… **Amount Validation:** Ğ—Ó©Ğ²Ñ…Ó©Ğ½ 1990/19900/39900â‚®  
âœ… **Code Format:** PZ-[6 char alphanumeric]  
âœ… **Used Code Check:** ĞÑĞ³ ÑƒĞ´Ğ°Ğ° Ğ» Ğ°ÑˆĞ¸Ğ³Ğ»Ğ°Ğ¶ Ğ±Ğ¾Ğ»Ğ½Ğ¾  

---

## ğŸ“Š Database Schema Summary

### PaymentCode
```javascript
{
  _id: ObjectId,
  code: "PZ-A1B2C3",          // unique index
  userId: ObjectId,            // indexed
  planId: "business_standard",
  amount: 19900,
  status: "pending",           // indexed
  expiresAt: Date,             // TTL + indexed
  usedAt: Date,
  createdAt: Date              // indexed
}
```

### SmsLog
```javascript
{
  _id: ObjectId,
  from: "1800",
  message: "KHANBANK: 19,900â‚®...",
  amount: 19900,
  transactionId: "TXN123",     // unique index
  userId: ObjectId,
  planId: "business_standard",
  processed: true,
  createdAt: Date              // TTL: 90 days
}
```

---

## ğŸš€ Deployment Checklist

- [ ] `.env` Ñ„Ğ°Ğ¹Ğ» Ñ‚Ğ¾Ñ…Ğ¸Ñ€ÑƒÑƒĞ»Ğ°Ñ…:
  ```env
  SMS_WEBHOOK_SECRET=random-secret-key-12345
  MONGO_URI=mongodb://localhost:27017/playzone
  JWT_SECRET=your-jwt-secret
  ```
- [ ] Server restart Ñ…Ğ¸Ğ¹Ñ…
- [ ] Logo Ñ„Ğ°Ğ¹Ğ» (`public/playzone-logo.svg`) Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° ÑÑÑÑ…Ğ¸Ğ¹Ğ³ ÑˆĞ°Ğ»Ğ³Ğ°Ñ…
- [ ] SMS Forwarder app ÑÑƒÑƒĞ»Ğ³Ğ°Ñ… (Android ÑƒÑ‚Ğ°Ñ)
- [ ] Webhook URL Ñ‚Ğ¾Ñ…Ğ¸Ñ€ÑƒÑƒĞ»Ğ°Ñ… (production ÑÑĞ²ÑĞ» ngrok)
- [ ] Test payment Ñ…Ğ¸Ğ¹Ğ¶, SMS Ğ¸Ñ€ÑÑ…Ğ¸Ğ¹Ğ³ ÑˆĞ°Ğ»Ğ³Ğ°Ñ…
- [ ] Database indexes Ò¯Ò¯ÑÑÑĞ½ ÑÑÑÑ…Ğ¸Ğ¹Ğ³ ÑˆĞ°Ğ»Ğ³Ğ°Ñ…
- [ ] Frontend Ğ´ÑÑÑ€ code Ñ…Ğ°Ñ€Ğ°Ğ³Ğ´Ğ°Ğ¶ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° ÑÑÑÑ…Ğ¸Ğ¹Ğ³ ÑˆĞ°Ğ»Ğ³Ğ°Ñ…

---

## âœ… Ğ”Ğ°Ğ²ÑƒÑƒ Ğ¢Ğ°Ğ»

1. **Unique Code:** Ğ¥ÑÑ€ÑĞ³Ğ»ÑĞ³Ñ‡ Ğ±Ò¯Ñ€ Ó©Ó©Ñ€Ğ¸Ğ¹Ğ½ Ğ³ÑÑÑĞ½ ĞºĞ¾Ğ´Ñ‚Ğ¾Ğ¹, Ğ´Ğ°Ğ²Ñ…Ñ†Ğ°Ğ¶ Ñ‚Ğ¾Ñ…Ğ¸Ğ¾Ğ»Ğ´Ğ¾Ñ…Ğ³Ò¯Ğ¹
2. **24h Expiry:** ĞšĞ¾Ğ´ Ñ…ÑƒÑƒÑ‡Ğ¸Ñ€Ğ´Ğ°Ğ³, Ğ°ÑÑƒĞ»Ğ³Ò¯Ğ¹ Ğ±Ğ°Ğ¹Ğ´Ğ°Ğ» ÑĞ°Ğ¹Ğ¶Ğ¸Ñ€Ğ½Ğ°
3. **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚:** SMS Ğ¸Ñ€ÑÑ…ÑĞ´ ÑˆÑƒÑƒĞ´ Ğ±Ğ°Ñ‚Ğ°Ğ»Ğ³Ğ°Ğ°Ğ¶Ğ½Ğ°, manual ÑˆĞ°Ğ»Ğ³Ğ°Ñ… ÑˆĞ°Ğ°Ñ€Ğ´Ğ»Ğ°Ğ³Ğ³Ò¯Ğ¹
4. **Fallback:** ĞšĞ¾Ğ´ Ğ°ÑˆĞ¸Ğ³Ğ»Ğ°Ğ°Ğ³Ò¯Ğ¹ Ğ±Ğ¾Ğ» PendingPayment (Ñ…ÑƒÑƒÑ‡Ğ¸Ğ½ ÑĞ¸ÑÑ‚ĞµĞ¼) Ğ°Ğ¶Ğ¸Ğ»Ğ»Ğ°Ğ½Ğ°
5. **Logging:** Ğ‘Ò¯Ñ… SMS Ñ…Ğ°Ğ´Ğ³Ğ°Ğ»Ğ°Ğ³Ğ´Ğ°Ğ½Ğ°, audit trail Ğ±Ò¯Ñ€ÑĞ½
6. **User-Friendly:** Code Ñ…ÑƒÑƒĞ»Ğ°Ñ… Ñ‚Ğ¾Ğ²Ñ‡Ñ‚Ğ¾Ğ¹, Ğ°Ğ»Ğ´Ğ°Ğ° Ğ³Ğ°Ñ€Ğ³Ğ°Ñ…Ğ³Ò¯Ğ¹

---

## ğŸ‰ ĞĞ¼Ğ¶Ğ¸Ğ»Ñ‚ Ñ…Ò¯ÑÑŒĞµ!

Ğ¢Ğ°Ğ½Ğ°Ğ¹ PlayZone MN ÑĞ¸ÑÑ‚ĞµĞ¼ Ğ¾Ğ´Ğ¾Ğ¾ **code-based payment system**-Ñ‚ÑĞ¹ Ğ±Ğ¾Ğ»Ğ»Ğ¾Ğ¾! ğŸš€

**ĞÑÑƒÑƒĞ»Ñ‚ Ğ±Ğ°Ğ¹Ğ²Ğ°Ğ»:** Ğ¢Ğ° Ğ¼Ğ¸Ğ½Ğ¸Ğ¹ ÑƒÑ‚ÑĞ°Ğ½Ğ´ (60643016) Ñ…Ğ¾Ğ»Ğ±Ğ¾Ğ³Ğ´Ğ¾Ğ¾Ñ€Ğ¾Ğ¹ ÑÑĞ²ÑĞ» email-ÑÑÑ€ (admin@playzonemn.com) Ğ¸Ğ»Ğ³ÑÑĞ³ÑÑÑ€ÑĞ¹.
